(this.webpackJsonpfundacion_pyme=this.webpackJsonpfundacion_pyme||[]).push([[0],{130:function(e,a,t){e.exports=t.p+"static/media/eye-solid.38842ea6.svg"},151:function(e,a,t){e.exports=t.p+"static/media/chevron-left-solid.450eeb69.svg"},156:function(e,a,t){e.exports=t.p+"static/media/isoFOP.5dce2f0b.svg"},157:function(e,a,t){e.exports=t.p+"static/media/sign-out.2dbd6693.svg"},158:function(e,a,t){e.exports=t.p+"static/media/listSolid.7375f330.svg"},159:function(e,a,t){e.exports=t.p+"static/media/user-solid.23f9162d.svg"},160:function(e,a,t){e.exports=t.p+"static/media/edit-solid.57008808.png"},161:function(e,a,t){e.exports=t.p+"static/media/trash-alt-regular.8f3b7fca.svg"},162:function(e,a,t){e.exports=t.p+"static/media/edit-regular.170b4532.svg"},179:function(e,a,t){e.exports=t(220)},184:function(e,a,t){},186:function(e,a,t){},187:function(e,a,t){},192:function(e,a,t){},213:function(e,a,t){},214:function(e,a,t){},215:function(e,a,t){},217:function(e,a,t){},218:function(e,a,t){e.exports=t.p+"static/media/fundacionObsPymeLogo.5541a2f6.png"},219:function(e,a,t){},220:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(11),s=t.n(l),o=(t(184),t(2)),c=t(15),i=t(17),u=t(20),m=t(25),p=t(35),d=t.n(p),g=t(50),E=t(96),h=t(97),b=t(113),f=t(110),v=(t(186),t(151)),_=t.n(v),O=(t(85),t(275)),N=t(270),y=(t(187),function(e){Object(b.a)(t,e);var a=Object(f.a)(t);function t(){return Object(E.a)(this,t),a.apply(this,arguments)}return Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,{id:"contained-modal-title-vcenter"},this.props.modalType," Encuesta")),r.a.createElement(N.a.Body,null,r.a.createElement("p",{className:"modal__bodyText"},"Estas por ",this.props.modalType.toLowerCase()," este formulario, \xbfDeseas continuar?")),r.a.createElement(N.a.Footer,null,r.a.createElement(O.a,{className:"modal__cancelarBtn",onClick:this.props.onHide},"Cancelar"),r.a.createElement(i.b,{to:"/home"},r.a.createElement(O.a,{className:"modal__guardarCambioBtn"},"Aceptar"))))}}]),t}(n.Component)),k=(t(94),t(36)),I=t.n(k),j=t(51),A=t.n(j),C=t(272),R=t(87),S=t(5),x=t(254),P=t(274),D=t(262),w=t(257),V=t(260),B=t(276),L=t(261),F=t(259),G=t(129),U=t.n(G),T=(t(192),t(118)),z=t(9),M=t.n(z),q=Object(x.a)({rtaList:{backgroundColor:"#c6c6c6"},list:{width:300,height:"100%",overflowY:"scroll"},fullList:{width:"auto",overflowY:"scroll"},inline:{color:"#42536E",fontWeight:"bold"}});function W(e){var a,t=q(),n=r.a.useState({right:!1,inputObs:"",idPregunta:e.pregunta._id}),l=Object(c.a)(n,2),s=l[0],i=l[1],u=function(e,a){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&i(Object(o.a)(Object(o.a)({},s),{},Object(R.a)({},e,a)))}},m=e.pregunta,p=function(e){var a=e.split("T",1),t=e.split("T",2);return(t=t[1].split(".",1))+" "+a},d=function(){e.revisarBtnClicked(),i(Object(o.a)(Object(o.a)({},s),{},{right:!1}));var a={idPregunta:s.idPregunta,revision:{observacion:{usuario:"adrewes123",mensaje:s.inputObs}}},t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.post("https://obs-pyme-validacion-back.herokuapp.com/api/pregunta/revision",a,t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))};return r.a.createElement(r.a.Fragment,{key:"right"},"OPERADOR"!==e.rol?r.a.createElement(D.a,{className:"drawer__btnObservacionSupervisor",onClick:u("right",!0)},"Revisar"):r.a.createElement(D.a,{className:"drawer__btnObservacionOperador",onClick:u("right",!0)},"Obervaciones"),r.a.createElement(P.a,{anchor:"right",open:s.right,onClose:u("right",!1)},(a="right",r.a.createElement("div",{className:Object(S.a)(t.list,Object(R.a)({},t.fullList,"top"===a||"bottom"===a)),role:"presentation"},r.a.createElement(w.a,{className:t.rtaList},r.a.createElement(B.a,null,r.a.createElement(F.a,{secondary:"Respuesta Original: "+m.value}))),r.a.createElement(V.a,null),0!==m.revisiones.length?r.a.createElement(r.a.Fragment,null,m.revisiones.map((function(e,a){return r.a.createElement(r.a.Fragment,null,e.observacion?r.a.createElement(w.a,{key:a},r.a.createElement(B.a,null,r.a.createElement(L.a,null,r.a.createElement(U.a,null)),r.a.createElement(F.a,{secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},e.observacion.usuario+" - Supervisor"),r.a.createElement("br",null),r.a.createElement("strong",null,"Observaci\xf3n:"),r.a.createElement("br",null),e.observacion.mensaje,r.a.createElement("br",null),p(e.observacion.created))}))):null,e.respuestaValidada?r.a.createElement(w.a,{key:a,style:{width:"300px",overflowX:"hidden"}},r.a.createElement(V.a,null),r.a.createElement(B.a,null,r.a.createElement(L.a,null,r.a.createElement(U.a,null)),r.a.createElement(F.a,{secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},e.respuestaValidada.usuario+" - Operador"),r.a.createElement("br",null),r.a.createElement("strong",null,"Respuesta Validada:"),r.a.createElement("br",null),e.respuestaValidada.value,r.a.createElement("br",null),e.respuestaValidada.created?p(e.respuestaValidada.created):null)}))):null,r.a.createElement(V.a,null))}))):null,"OPERADOR"!==e.rol?r.a.createElement("div",{className:"drawer__inputSection"},r.a.createElement("textarea",{className:"drawer__input",rows:5,placeholder:"Escriba su comentario...",onChange:function(e){return function(e){var a=e.target.value;i(Object(o.a)(Object(o.a)({},s),{},{inputObs:a}))}(e)}}),r.a.createElement(D.a,{onClick:d,className:"drawer__inputBtun"},"Enviar a Revisar")):null))))}var H=function(e){var a=e.objPregunta,t=Object(n.useState)({estado:a.status}),l=Object(c.a)(t,2),s=l[0],i=l[1],u=function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{style:{marginRight:"5px"},className:"pregunta__formGroupContainer"},a.options.map((function(e,t){return r.a.createElement(C.a.Check,{key:t,type:"checkbox",label:e,name:"choiceRadio",id:t,defaultChecked:parseInt(a.value)-1===t,disabled:!0,className:"product__choiceItem"})})));case"NUMBER":return r.a.createElement("input",{style:{marginRight:"5px"},className:"pregunta__respuestaContainer",value:a.value,disabled:!0});case"SELECT":return r.a.createElement(C.a.Group,{style:{marginRight:"5px"},className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",defaultValue:a.questions[parseInt(a.value)-1],disabled:!0},a.options.map((function(e,a){return r.a.createElement("option",{key:a},e)}))));case"FILE":return r.a.createElement("div",{style:{marginRight:"5px"},className:"pregunta__inputRespuestaContainer"},r.a.createElement("a",{href:a.value},"Archivo Subido"));default:return r.a.createElement("textarea",{style:{marginRight:"5px"},className:"pregunta__respuestaContainer",value:"".concat(a.value),disabled:!0})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pregunta"},r.a.createElement("div",{className:"pregunta__header"},r.a.createElement("p",{className:"pregunta__numero"},"Item ",e.idPreguntaPadre+"."+parseInt(e.numId+1)," ",a.mandatory?"(*)":null),r.a.createElement("p",{className:"pregunta__sticker"},function(){switch(s.estado){case"APROBADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:A.a,alt:"hourglass.svg"}),"Aprobado");case"REVISION":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"En revisi\xf3n");case"VALIDADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"Validada");default:return null}}())),r.a.createElement("div",{className:"pregunta__descripcionContainer"},r.a.createElement("p",{className:"pregunta__descripcion"},a.title)),r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta"),"VALIDADA"===s.estado?r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta Validada"):null,r.a.createElement("div",{className:"pregunta__respuestaGeneral"},"APROBADA"===s.estado&&0===a.revisiones.length||"VALIDADA"===s.estado?u():null,"VALIDADA"===s.estado||"APROBADA"===s.estado&&0!==a.revisiones.length?function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer",style:{width:"auto"}},a.options.map((function(e,t){return r.a.createElement(C.a.Check,{key:t,type:"checkbox",label:e,name:"choiceRadio",id:t,className:"product__choiceItem",defaultChecked:parseInt(a.lastValue)-1===t})})));case"NUMBER":return r.a.createElement("input",{style:{marginLeft:"0"},className:"pregunta__inputRespuestaContainer",type:"number",value:a.lastValue});case"SELECT":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",defaultValue:a.lastValue?a.options[parseInt(a.lastValue)-1]:null},r.a.createElement("option",null,"Seleccionar"),a.options.map((function(e,a){return r.a.createElement("option",{key:a},e)}))));case"FILE":return r.a.createElement(r.a.Fragment,null,"VALIDADA"!==s.estado?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"pregunta__inputRespuestaContainer",type:"file",name:"archivo"}),a.lastValue?r.a.createElement("div",{className:"pregunta__inputRespuestaContainer"},r.a.createElement("a",{href:a.lastValue},"Archivo Validado")):null):r.a.createElement("div",{className:"pregunta__inputRespuestaContainer"},r.a.createElement("a",{href:a.lastValue},"Archivo Validado")));default:return r.a.createElement("textarea",{className:"pregunta__respuestaContainer",value:a.lastValue})}}():null,"PENDIENTE"===s.estado||"REVISION"===s.estado?u():null),r.a.createElement("div",{className:"VALIDADA"===s.estado?"pregunta__btnSectionEnRevision":"pregunta__btnSectionAprobado"},r.a.createElement(W,{pregunta:a,revisarBtnClicked:function(){i(Object(o.a)(Object(o.a)({},s),{},{estado:"REVISION"}))}}),r.a.createElement("button",{className:"pregunta__btnAprobar",onClick:function(){i(Object(o.a)(Object(o.a)({},s),{},{estado:"APROBADA"}));var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/pregunta/".concat(a._id,"/status"),{status:"APROBADA"},e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},"Aprobar"))))};var Y=function(e){var a=e.objPregunta,t=Object(n.useState)({estado:a.status}),l=Object(c.a)(t,2),s=l[0],i=l[1],u=function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{style:{marginRight:"5px"},className:"pregunta__formGroupContainer"},a.options.map((function(e,t){return r.a.createElement(C.a.Check,{key:t,type:"checkbox",label:e,name:"choiceRadio",id:t,defaultChecked:parseInt(a.value)-1===t,disabled:!0,className:"product__choiceItem"})})));case"NUMBER":return r.a.createElement("input",{style:{marginRight:"5px"},className:"pregunta__respuestaContainer",value:a.value,disabled:!0});case"SELECT":return r.a.createElement(C.a.Group,{style:{marginRight:"5px"},className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",defaultValue:a.questions[parseInt(a.value)-1],disabled:!0},a.options.map((function(e,a){return r.a.createElement("option",{key:a},e)}))));case"FILE":return r.a.createElement("div",{style:{marginRight:"5px"},className:"pregunta__inputRespuestaContainer"},r.a.createElement("a",{href:a.value},"Archivo Subido"));case"GROUPED":return r.a.createElement("div",{className:"pregunta__groupedContainer",style:{marginLeft:"0px"}},a.questions.map((function(a,t){return r.a.createElement(H,{key:a._id,numId:t,objPregunta:a,idPreguntaPadre:e.numId+1,editable:!1})})));default:return r.a.createElement("textarea",{style:{marginRight:"5px"},className:"pregunta__respuestaContainer",value:"".concat(a.value),disabled:!0})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pregunta"},r.a.createElement("div",{className:"pregunta__header"},r.a.createElement("p",{className:"pregunta__numero"},"Pregunta ",e.numId+1," ",a.mandatory?"(*)":null),r.a.createElement("p",{className:"pregunta__sticker"},"GROUPED"!==a.type?function(){switch(s.estado){case"APROBADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:A.a,alt:"hourglass.svg"}),"Aprobado");case"REVISION":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"En revisi\xf3n");case"VALIDADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"Validada");default:return null}}():null)),r.a.createElement("div",{className:"pregunta__descripcionContainer"},r.a.createElement("p",{className:"pregunta__descripcion"},a.title)),"GROUPED"!==a.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta"),"VALIDADA"===s.estado?r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta Validada"):null):r.a.createElement("br",null),r.a.createElement("div",{className:"pregunta__respuestaGeneral"},"APROBADA"===s.estado&&0===a.revisiones.length||"VALIDADA"===s.estado?u():null,"VALIDADA"===s.estado||"APROBADA"===s.estado&&0!==a.revisiones.length?function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer",style:{width:"auto"}},a.options.map((function(e,t){return r.a.createElement(C.a.Check,{key:t,type:"checkbox",label:e,name:"choiceRadio",id:t,className:"product__choiceItem",defaultChecked:parseInt(a.lastValue)-1===t})})));case"NUMBER":return r.a.createElement("input",{style:{marginLeft:"0"},className:"pregunta__inputRespuestaContainer",type:"number",value:a.lastValue});case"SELECT":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",defaultValue:a.lastValue?a.options[parseInt(a.lastValue)-1]:null},r.a.createElement("option",null,"Seleccionar"),a.options.map((function(e,a){return r.a.createElement("option",{key:a},e)}))));case"FILE":return r.a.createElement(r.a.Fragment,null,"VALIDADA"!==s.estado?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"pregunta__inputRespuestaContainer",type:"file",name:"archivo"}),a.lastValue?r.a.createElement("div",{className:"pregunta__inputRespuestaContainer"},r.a.createElement("a",{href:a.lastValue},"Archivo Validado")):null):r.a.createElement("div",{className:"pregunta__inputRespuestaContainer"},r.a.createElement("a",{href:a.lastValue},"Archivo Validado")));case"GROUPED":return r.a.createElement("div",{className:"pregunta__groupedContainer",style:{marginLeft:"0px"}});default:return r.a.createElement("textarea",{className:"pregunta__respuestaContainer",value:a.lastValue})}}():null,"PENDIENTE"===s.estado||"REVISION"===s.estado?u():null),"GROUPED"!==a.type?r.a.createElement("div",{className:"VALIDADA"===s.estado&&"GROUPED"!==a.type?"pregunta__btnSectionEnRevision":"pregunta__btnSectionAprobado"},r.a.createElement(W,{pregunta:a,revisarBtnClicked:function(){i(Object(o.a)(Object(o.a)({},s),{},{estado:"REVISION"}))}}),r.a.createElement("button",{className:"pregunta__btnAprobar",onClick:function(){i(Object(o.a)(Object(o.a)({},s),{},{estado:"APROBADA"}));var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/pregunta/".concat(a._id,"/status"),{status:"APROBADA"},e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},"Aprobar")):null))},J=t(111);var X=function(e){var a=e.objPregunta,t=Object(n.useState)({estado:a.status,resultado:a.lastValue,filename:"",rol:"",groupedResultado:Object(J.a)(Array(a.questions.length).keys())}),l=Object(c.a)(t,2),s=l[0],i=l[1];return Object(n.useEffect)((function(){var e=Object(m.a)(localStorage.getItem("token")).role;i(Object(o.a)(Object(o.a)({},s),{},{rol:e}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pregunta"},r.a.createElement("div",{className:"pregunta__header"},r.a.createElement("p",{className:"pregunta__numero"},"Pregunta ",e.idPreguntaPadre+"."+parseInt(e.numId+1)," ",a.mandatory?"(*)":null),r.a.createElement("p",{className:"pregunta__sticker"},function(){switch(s.estado){case"APROBADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:A.a,alt:"hourglass.svg"}),"Aprobado");case"REVISION":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"En revisi\xf3n");case"VALIDADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"Validada");default:return null}}())),r.a.createElement("div",{className:"pregunta__descripcionContainer"},r.a.createElement("p",{className:"pregunta__descripcion"},a.title)),r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta"),r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta Validada"),r.a.createElement("div",{className:"pregunta__respuestaGeneral"},function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},a.options.map((function(e,t){return r.a.createElement(C.a.Check,{key:t,type:"checkbox",label:e,name:"choiceRadio",id:t+1,defaultChecked:parseInt(a.value)-1===t,disabled:!0,className:"product__choiceItem"})})));case"NUMBER":return r.a.createElement("input",{className:"pregunta__respuestaContainer",value:a.value,disabled:!0});case"SELECT":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",defaultValue:a.options[parseInt(a.value)-1],disabled:!0},a.options.map((function(e,a){return r.a.createElement("option",{key:a+1},e)}))));case"FILE":return r.a.createElement("div",{className:"pregunta__inputRespuestaContainer",style:{marginLeft:"0px"}},r.a.createElement("a",{href:a.value},"Archivo"));default:return r.a.createElement("textarea",{className:"pregunta__respuestaContainer",value:"".concat(a.value),disabled:!0})}}(),function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},a.options.map((function(e,a){return r.a.createElement(C.a.Check,{key:a+1,type:"radio",label:e,name:"choiceRadio",id:a+1,className:"product__choiceItem",value:a+1,onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}})})));case"NUMBER":return r.a.createElement("input",{className:"pregunta__inputRespuestaContainer",type:"number",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}});case"SELECT":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}},r.a.createElement("option",null,"Seleccionar"),a.options.map((function(e,a){return r.a.createElement("option",{key:a+1,value:a+1},e)}))));case"FILE":return r.a.createElement("input",{className:"pregunta__inputRespuestaContainer",type:"file",name:"archivo",onChange:function(e){return function(e){i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.files[0]}))}(e)}});default:return r.a.createElement("textarea",{style:{marginLeft:"10px"},className:"pregunta__respuestaContainer",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}})}}()),r.a.createElement("div",{className:"pregunta__btnSectionEnRevision"},r.a.createElement(W,{pregunta:a,rol:s.rol}),r.a.createElement("button",{className:"pregunta__btnValidar",onClick:function(){i(Object(o.a)(Object(o.a)({},s),{},{estado:"VALIDADA"}));var e=a.revisiones,t="",n="";e.forEach((function(e){if(""===t)t=e._id,n=e.observacion.created;else{var a=new Date(n);new Date(e.observacion.created)>a&&(t=e._id,n=e.observacion.created)}}));var r={headers:{Authorization:"Bearer "+localStorage.getItem("token"),Accept:"application/form-data"}},l={idPregunta:a._id,idRevision:t,revision:{respuestaValidada:{usuario:localStorage.getItem("username"),value:s.resultado}}};if("FILE"===a.type){var c=new FormData;c.append("files",s.resultado,s.resultado.name),M.a.post("https://obs-pyme-validacion-back.herokuapp.com/api/upload",c,r).then((function(e){var n={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};l={idPregunta:a._id,idRevision:t,revision:{respuestaValidada:{usuario:localStorage.getItem("username"),value:e.data.files[0].url}}},M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/pregunta/revision",l,n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}else{var u={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/pregunta/revision",l,u).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}},"Validar"))))};var Z=function(e){var a=e.objPregunta,t=Object(n.useState)({estado:a.status,resultado:a.lastValue,filename:"",rol:"",groupedResultado:Object(J.a)(Array(a.questions.length).keys())}),l=Object(c.a)(t,2),s=l[0],i=l[1];return Object(n.useEffect)((function(){var e=Object(m.a)(localStorage.getItem("token")).role;i(Object(o.a)(Object(o.a)({},s),{},{rol:e}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pregunta"},r.a.createElement("div",{className:"pregunta__header"},r.a.createElement("p",{className:"pregunta__numero"},"Pregunta ",e.numId+1," ",a.mandatory?"(*)":null),r.a.createElement("p",{className:"pregunta__sticker"},"GROUPED"!==a.type?function(){switch(s.estado){case"APROBADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:A.a,alt:"hourglass.svg"}),"Aprobado");case"REVISION":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"En revisi\xf3n");case"VALIDADA":return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"pregunta__hourglass",src:I.a,alt:"hourglass.svg"}),"Validada");default:return null}}():null)),r.a.createElement("div",{className:"pregunta__descripcionContainer"},r.a.createElement("p",{className:"pregunta__descripcion"},a.title)),"GROUPED"!==a.type?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta"),r.a.createElement("p",{className:"pregunta__respuesta"},"Respuesta Validada")):r.a.createElement("br",null),r.a.createElement("div",{className:"pregunta__respuestaGeneral"},function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},a.options.map((function(e,t){return r.a.createElement(C.a.Check,{key:t,type:"checkbox",label:e,name:"choiceRadio",id:t+1,defaultChecked:parseInt(a.value)-1===t,disabled:!0,className:"product__choiceItem"})})));case"NUMBER":return r.a.createElement("input",{className:"pregunta__respuestaContainer",value:a.value,disabled:!0});case"SELECT":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",defaultValue:a.options[parseInt(a.value)-1],disabled:!0},a.options.map((function(e,a){return r.a.createElement("option",{key:a+1},e)}))));case"FILE":return r.a.createElement("div",{className:"pregunta__inputRespuestaContainer",style:{marginLeft:"0px"}},r.a.createElement("a",{href:a.value},"Archivo"));case"GROUPED":return r.a.createElement("div",{className:"pregunta__groupedContainer",style:{marginLeft:"0px"}},a.questions.map((function(a,t){return"REVISION"===a.status?r.a.createElement(X,{key:a._id,numId:t,objPregunta:a,idPreguntaPadre:e.numId+1}):null})));default:return r.a.createElement("textarea",{className:"pregunta__respuestaContainer",value:"".concat(a.value),disabled:!0})}}(),function(){switch(a.type){case"CHOICE":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},a.options.map((function(e,a){return r.a.createElement(C.a.Check,{key:a+1,type:"radio",label:e,name:"choiceRadio",id:a+1,className:"product__choiceItem",value:a+1,onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}})})));case"NUMBER":return r.a.createElement("input",{className:"pregunta__inputRespuestaContainer",type:"number",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}});case"SELECT":return r.a.createElement(C.a.Group,{className:"pregunta__formGroupContainer"},r.a.createElement(C.a.Control,{className:"pregunta__desplegableItem",as:"select",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}},r.a.createElement("option",null,"Seleccionar"),a.options.map((function(e,a){return r.a.createElement("option",{key:a+1,value:a+1},e)}))));case"FILE":return r.a.createElement("input",{className:"pregunta__inputRespuestaContainer",type:"file",name:"archivo",onChange:function(e){return function(e){i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.files[0]}))}(e)}});case"GROUPED":return r.a.createElement("div",{className:"pregunta__groupedContainer",style:{marginLeft:"0px"}});default:return r.a.createElement("textarea",{style:{marginLeft:"10px"},className:"pregunta__respuestaContainer",onChange:function(e){return i(Object(o.a)(Object(o.a)({},s),{},{resultado:e.target.value}))}})}}()),"GROUPED"!==a.type?r.a.createElement("div",{className:"pregunta__btnSectionEnRevision"},r.a.createElement(W,{pregunta:a,rol:s.rol}),r.a.createElement("button",{className:"pregunta__btnValidar",onClick:function(){if(s.resultado){i(Object(o.a)(Object(o.a)({},s),{},{estado:"VALIDADA"}));var e=a.revisiones,t="",n="";e.forEach((function(e){if(""===t)t=e._id,n=e.observacion.created;else{var a=new Date(n);new Date(e.observacion.created)>a&&(t=e._id,n=e.observacion.created)}}));var r={headers:{Authorization:"Bearer "+localStorage.getItem("token"),Accept:"application/form-data"}},l={idPregunta:a._id,idRevision:t,revision:{respuestaValidada:{usuario:localStorage.getItem("username"),value:s.resultado}}};if("FILE"===a.type){var c=new FormData;c.append("files",s.resultado,s.resultado.name),M.a.post("https://obs-pyme-validacion-back.herokuapp.com/api/upload",c,r).then((function(e){var n={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};l={idPregunta:a._id,idRevision:t,revision:{respuestaValidada:{usuario:localStorage.getItem("username"),value:e.data.files[0].url}}},M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/pregunta/revision",l,n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),alert("Ha ocurrido un error, favor de intentar nuevamente...")}))}else{var u={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/pregunta/revision",l,u).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}else alert("No se carg\xf3 ningun archivo para validar...")}},"Validar")):null))},$=function(e){Object(b.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(E.a)(this,t),(n=a.call(this,e)).addModalClose=function(){return n.setState(Object(o.a)(Object(o.a)({},n.state),{},{addModalShow:!1}))},n.revisarBtnClicked=function(){n.fetchData().then((function(){if(n.state.objEncuesta){var e=n.state.objEncuesta;n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaRevision:!0})),n.setState(Object(o.a)(Object(o.a)({},n.state),{},{existePreguntaARevisar:!1})),e.sections.forEach((function(e){e.questions.forEach((function(e){"PENDIENTE"===e.status&&"GROUPED"!==e.type&&n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaRevision:!1})),"REVISION"===e.status&&"GROUPED"!==e.type&&n.setState(Object(o.a)(Object(o.a)({},n.state),{},{existePreguntaARevisar:!0})),"GROUPED"===e.type&&e.questions.forEach((function(e){"PENDIENTE"===e.status&&n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaRevision:!1})),"REVISION"===e.status&&n.setState(Object(o.a)(Object(o.a)({},n.state),{},{existePreguntaARevisar:!0}))}))}))}))}if(n.state.encuestaEnviableParaRevision&&n.state.existePreguntaARevisar){if(window.confirm("Desea enviar esta encuesta a revisar?")){var a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/encuesta/".concat(n.state.objEncuesta._id,"/status"),{status:"REVISION"},a).then((function(e){n.props.history.push("/home")})).catch((function(e){console.log(e)}))}}else alert("Existen preguntas que todavia estan PENDIENTES o directamente no hay preguntas para REVISAR. \nPor favor aprobarlas o mandarlas a revisi\xf3n antes de enviar esta encuesta a revisi\xf3n.")}))},n.aprobarBtnClicked=function(){n.fetchData().then((function(){if(n.state.objEncuesta){var e=n.state.objEncuesta;n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaAprobar:!0})),e.sections.forEach((function(e){e.questions.forEach((function(e){"APROBADA"!==e.status&&"GROUPED"!==e.type&&n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaAprobar:!1})),"GROUPED"===e.type&&e.questions.forEach((function(e){"APROBADA"!==e.status&&n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaAprobar:!1}))}))}))}))}if(n.state.encuestaEnviableParaAprobar){if(window.confirm("Desea aprobar esta encuesta?")){var a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/encuesta/".concat(n.state.objEncuesta._id,"/status"),{status:"APROBADA"},a).then((function(e){n.props.history.push("/home")})).catch((function(e){console.log(e)}))}}else alert("Existen preguntas que todavia no estan APROBADAS. Por favor aprobarlas antes de aprobar esta encuesta.")}))},n.rechazarBtnClicked=function(){if(window.confirm("Desea rechazar esta encuesta?")){var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/encuesta/".concat(n.state.objEncuesta._id,"/status"),{status:"RECHAZADA"},e).then((function(e){n.props.history.push("/home")})).catch((function(e){console.log(e)}))}},n.validarBtnClicked=function(){n.fetchData().then((function(){if(n.state.objEncuesta){var e=n.state.objEncuesta;n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaValidar:!0})),e.sections.forEach((function(e){e.questions.forEach((function(e){"REVISION"===e.status&&n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaValidar:!1}))}))}))}if(n.state.encuestaEnviableParaValidar){if(window.confirm("Desea terminar de validar esta encuesta?")){var a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/encuesta/".concat(n.state.objEncuesta._id,"/status"),{status:"VALIDADA"},a).then((function(e){n.props.history.push("/home")})).catch((function(e){console.log(e)}))}}else alert("Existen preguntas que todavia estan en REVISION. Por favor validarlas antes de aprobar esta encuesta.")}))},n.encuestaNoAprobable=function(){n.setState(Object(o.a)(Object(o.a)({},n.state),{},{encuestaEnviableParaAprobar:!1}))},n.state={addModalShow:!1,modalType:"",encuestaEnviableParaRevision:!0,existePreguntaARevisar:!1,encuestaEnviableParaAprobar:!0,encuestaEnviableParaValidar:!0,statusPreguntas:[],rol:""},n}return Object(h.a)(t,[{key:"fetchData",value:function(){var e=Object(g.a)(d.a.mark((function e(){var a,t,n,r,l=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},t=this.props.location.state.idEncuesta,e.next=4,M.a.get("https://obs-pyme-validacion-back.herokuapp.com/api/encuesta/".concat(t),a);case 4:n=e.sent,r=n.data,this.setState(Object(o.a)(Object(o.a)({},this.state),{},{objEncuesta:r[0]})),M.a.get("https://obs-pyme-validacion-back.herokuapp.com/api/usuario",a).then((function(e){var a=e.data.rol;l.setState(Object(o.a)(Object(o.a)({},l.state),{},{rol:a}))})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.objEncuesta?r.a.createElement("div",{className:"nav"},r.a.createElement(i.b,{className:"nav_button",to:"/home"},r.a.createElement("img",{alt:"<",src:_.a,className:"nav_image"}),this.state.objEncuesta.name?" "+this.state.objEncuesta.company.name:" Loading..."),r.a.createElement("p",null),r.a.createElement("li",null,r.a.createElement("strong",null,"ID:")," ",this.state.objEncuesta._id.slice(this.state.objEncuesta._id.length-6)),r.a.createElement("li",null,r.a.createElement("strong",null,"Encuesta:"),"  ",this.state.objEncuesta.name," "),r.a.createElement("li",null,r.a.createElement("strong",null,"Fecha creada:"),"  ",this.state.objEncuesta.created.split("T",1)),r.a.createElement("li",null,r.a.createElement("strong",null," Fecha actualizada:"),"  ",this.state.objEncuesta.modified.split("T",1)),r.a.createElement("hr",null)):null,this.state.objEncuesta?this.state.objEncuesta.sections.map((function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("p",{style:{fontSize:"18px",marginLeft:"16px",color:"#42536E"}},r.a.createElement("strong",null,a.title)),r.a.createElement("p",{style:{fontSize:"18px",marginLeft:"16px",color:"#42536E"}},r.a.createElement("strong",null,a.description)),r.a.createElement("br",null),"SUPERVISOR"===e.state.rol?a.questions.map((function(a,t){return r.a.createElement(Y,{key:a._id,numId:t,objPregunta:a,userRol:e.state.rol})})):null,"OPERADOR"===e.state.rol?a.questions.map((function(a,t){return"REVISION"===a.status?r.a.createElement(Z,{key:a._id,numId:t,objPregunta:a,userRol:e.state.rol}):null})):null,r.a.createElement("hr",null))})):null,r.a.createElement("div",{className:"nav_accept_button"},"SUPERVISOR"!==this.state.rol&&"ADMINISTRADOR"!==this.state.rol||!this.state.objEncuesta?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{className:"nav_rechazarBtn",onClick:this.rechazarBtnClicked},"Rechazar Encuesta"),r.a.createElement(O.a,{className:"nav__revisarBtn",onClick:this.revisarBtnClicked},"Enviar para revisar"),r.a.createElement(O.a,{className:"nav_aprobarBtn",onClick:this.aprobarBtnClicked},"Aprobar Encuesta"),r.a.createElement(y,{show:this.state.addModalShow,onHide:this.addModalClose,modalType:this.state.modalType})),"OPERADOR"===this.state.rol?r.a.createElement(O.a,{className:"nav_enviarValidacionBtn",onClick:this.validarBtnClicked},"Encuesta Validada"):null))}}]),t}(n.Component),K=Object(u.h)($),Q=t(263),ee=t(265),ae=t(269),te=t(268),ne=t(264),re=t(266),le=t(271),se=t(267),oe=t(130),ce=t.n(oe),ie=[{id:"id",label:"ID",minWidth:20},{id:"name",label:"Encuesta",minWidth:250},{id:"empresa",label:"Empresa",minWidth:100,align:"center"},{id:"estado",label:"Estado",minWidth:100,align:"center"},{id:"creado",label:"Creado",minWidth:100,align:"center"},{id:"modificado",label:"Modificado",minWidth:100,align:"center"},{id:"sections",label:"Acci\xf3n",minWidth:100,align:"center"}];function ue(e,a,t,n,r,l,s){return{id:e,name:a,empresa:t,estado:n,creado:r,modificado:l,sections:s}}var me=Object(x.a)({root:{width:"100%"},container:{maxHeight:440}});function pe(){var e=me(),a=r.a.useState(0),t=Object(c.a)(a,2),l=t[0],s=t[1],o=r.a.useState(10),u=Object(c.a)(o,2),p=u[0],E=u[1],h=Object(n.useState)(""),b=Object(c.a)(h,2),f=b[0],v=b[1],_=Object(n.useState)({rol:""}),O=Object(c.a)(_,2),N=(O[0],O[1]),y=Object(n.useState)([]),k=Object(c.a)(y,2),I=k[0],j=k[1];Object(n.useEffect)((function(){function e(){return(e=Object(g.a)(d.a.mark((function e(){var a,t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},e.next=3,M.a.get("https://obs-pyme-validacion-back.herokuapp.com/api/encuesta",a);case 3:t=e.sent,n=t.data,r=[],n.forEach((function(e){var a=e.modified.split("T",1).toString(),t=a,n=a=e.created.split("T",1).toString(),l=e._id.slice(e._id.length-6);r.push(ue(l,e.name,e.company.name,e.status,n,t,e._id))})),j(r),N(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var A=Object(m.a)(localStorage.getItem("token")).role;return r.a.createElement("div",{className:"table"},r.a.createElement("p",{className:"table-title"},"Listado de Encuestas"),r.a.createElement("div",{style:{display:"flex",marginBottom:"30px"}},r.a.createElement("input",{type:"text",placeholder:"Buscar encuesta",style:{padding:"8px 10px",borderRadius:"5px 0 0 5px",outline:"none"},value:f,onChange:function(e){return v(e.target.value.toLowerCase())}})),r.a.createElement(Q.a,{className:e.root},r.a.createElement(ne.a,{className:e.container},r.a.createElement(ee.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(re.a,null,r.a.createElement(se.a,null,ie.map((function(e){return r.a.createElement(te.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),r.a.createElement(ae.a,null,I.slice(l*p,l*p+p).map((function(e){return e.name.toLowerCase().includes(f)||e.id.toLowerCase().includes(f)||e.empresa.toLowerCase().includes(f)||e.estado.toLowerCase().includes(f)||e.creado.toLowerCase().includes(f)||e.modificado.toLowerCase().includes(f)?"OPERADOR"!==A?r.a.createElement(se.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.id},ie.map((function(a){var t=e[a.id];return"sections"!==a.id?r.a.createElement(te.a,{key:a.id,align:a.align},t):r.a.createElement(te.a,{key:a.id,align:a.align},r.a.createElement(i.b,{to:{pathname:"/detalle",state:{idEncuesta:t}},style:{display:"flex",alignItems:"center",textDecoration:"none",marginLeft:"20px"}},r.a.createElement("img",{className:"detail-eye",src:ce.a,alt:"eye-solid.svg"}),r.a.createElement("p",{className:"verDetalle"},"Ver detalle")))}))):"REVISION"===e.estado?r.a.createElement(se.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.id},ie.map((function(a){var t=e[a.id];return"sections"!==a.id?r.a.createElement(te.a,{key:a.id,align:a.align},t):r.a.createElement(te.a,{key:a.id,align:a.align},r.a.createElement(i.b,{to:{pathname:"/detalle",state:{idEncuesta:t}},style:{display:"flex",alignItems:"center",textDecoration:"none",marginLeft:"20px"}},r.a.createElement("img",{className:"detail-eye",src:ce.a,alt:"eye-solid.svg"}),r.a.createElement("p",{className:"verDetalle"},"Ver detalle")))}))):null:null}))))),r.a.createElement(le.a,{rowsPerPageOptions:[10,25,100],component:"div",count:I.length,rowsPerPage:p,page:l,onChangePage:function(e,a){s(a)},onChangeRowsPerPage:function(e){E(+e.target.value),s(0)}})))}var de=t(156),ge=t.n(de),Ee=(t(213),t(157)),he=t.n(Ee),be=t(158),fe=t.n(be),ve=t(159),_e=t.n(ve),Oe=t(160),Ne=t.n(Oe);var ye=function(e){var a=localStorage.getItem("token"),t=Object(m.a)(a);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebar-body"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{style:{display:["flex"],alignItems:"flex-end"}},r.a.createElement("img",{className:"sidebar-ISO",src:ge.a,alt:"IsoFOP.svg"}),r.a.createElement("p",{className:"sidebar-FOP"},"Fundaci\xf3n Observatorio PYME ")),r.a.createElement("div",null,"ADMINISTRADOR"!==t.role?r.a.createElement(i.b,{to:"/home",className:"location-text"},r.a.createElement("img",{className:"solid.list",src:fe.a,alt:"listSolid.svg"}),r.a.createElement("p",{className:"sidebar-text",href:"#Encuestas"},"Encuestas")):null,"ADMINISTRADOR"===t.role?r.a.createElement(i.b,{to:"/usuarios",className:"location-text",style:{marginTop:"50px"}},r.a.createElement("img",{className:"solid.list",src:_e.a,alt:"listSolid.svg"}),r.a.createElement("p",{className:"sidebar-text",href:"#Encuestas"},"Usuarios")):null,r.a.createElement(i.b,{to:"/perfil",className:"location-text",style:{marginTop:"20px"}},r.a.createElement("img",{className:"solidIcon",src:Ne.a,alt:"listSolid.svg"}),r.a.createElement("p",{className:"sidebar-text",href:"#Encuestas"},"Editar Perfil")))),r.a.createElement("div",null,r.a.createElement(i.b,{to:"/login",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("username")},className:"signOutBtn"},r.a.createElement("img",{src:he.a,alt:"IsoFOP.svg"}),r.a.createElement("p",{className:"sidebar-logoff",href:"#LogOut"},"Cerrar Sesi\xf3n")))))},ke=t(161),Ie=t.n(ke),je=t(162),Ae=t.n(je),Ce=(t(214),[{id:"id",label:"ID",minWidth:20},{id:"name",label:"Nombre del Empleado",minWidth:250},{id:"usuario",label:"Usuario",minWidth:100,align:"center"},{id:"password",label:"Contrase\xf1a",minWidth:100,align:"center"},{id:"rol",label:"Rol",minWidth:100,align:"center"},{id:"accion",label:"Acci\xf3n",minWidth:100,align:"center"}]);function Re(e,a,t,n,r,l){return{id:e,name:a,usuario:t,password:n,rol:r,action:l}}var Se=Object(x.a)({root:{width:"100%"},container:{maxHeight:440}});function xe(){var e=Se(),a=r.a.useState(0),t=Object(c.a)(a,2),l=t[0],s=t[1],o=r.a.useState(10),m=Object(c.a)(o,2),p=m[0],E=m[1],h=Object(n.useState)(""),b=Object(c.a)(h,2),f=b[0],v=b[1],_=Object(n.useState)([]),O=Object(c.a)(_,2),N=O[0],y=O[1],k=Object(u.g)();Object(n.useEffect)((function(){function e(){return(e=Object(g.a)(d.a.mark((function e(){var a,t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},e.next=3,M.a.get("https://obs-pyme-validacion-back.herokuapp.com/api/usuario/list",a);case 3:t=e.sent,n=t.data,r=[],n.forEach((function(e){r.push(Re(e._id,e.nombre,e.username,e.contrase\u00f1a,e.rol,e.username))})),y(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var I="";return r.a.createElement("div",{className:"table"},r.a.createElement("p",{className:"table-title"},"Listado de Usuarios"),r.a.createElement("div",{style:{display:"flex",marginBottom:"30px"}},r.a.createElement("input",{type:"text",placeholder:"Buscar usuario",style:{padding:"8px 10px",borderRadius:"5px 0 0 5px",outline:"none"},value:f,onChange:function(e){return v(e.target.value.toLowerCase())}})),r.a.createElement(Q.a,{className:e.root},r.a.createElement(ne.a,{className:e.container},r.a.createElement(ee.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(re.a,null,r.a.createElement(se.a,null,Ce.map((function(e){return r.a.createElement(te.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),r.a.createElement(ae.a,null,N.slice(l*p,l*p+p).map((function(e){return e.id.toLowerCase().includes(f)||e.name.toLowerCase().includes(f)||e.usuario.toLowerCase().includes(f)||e.rol.toLowerCase().includes(f)?r.a.createElement(se.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.code},Ce.map((function(a){var t=e[a.id];return"accion"!==a.id?"password"===a.id?r.a.createElement(te.a,{key:a.id,align:a.align},"*".repeat(t.length)):"id"===a.id?(I=t,r.a.createElement(te.a,{key:a.id,align:a.align},t.slice(t.length-6))):(a.id,r.a.createElement(te.a,{key:a.id,align:a.align},t)):r.a.createElement(te.a,{key:a.id,align:a.align,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"15px 0px"}},r.a.createElement(i.b,{style:{display:"flex",alignItems:"center",textDecoration:"none"},onClick:function(e){return function(e){e.preventDefault();var a=e.target.alt;k.push({pathname:"/altaUsuario",state:{tipo:"Modificar",username:a}})}(e)}},r.a.createElement("img",{className:"detail-eye",src:Ae.a,alt:I})),r.a.createElement(i.b,{style:{display:"flex",alignItems:"center",textDecoration:"none",marginLeft:"10px"},onClick:function(e){return function(e){var a=e.target.alt,t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};console.log(a),M.a.delete("https://obs-pyme-validacion-back.herokuapp.com/api/usuario/".concat(a),t).then((function(e){var t=N.filter((function(e){return e.id!==a}));y(t)})).catch((function(e){console.log(e)}))}(e)}},r.a.createElement("img",{className:"detail-eye",src:Ie.a,alt:I})))}))):null}))))),r.a.createElement(le.a,{rowsPerPageOptions:[10,25,100],component:"div",count:N.length,rowsPerPage:p,page:l,onChangePage:function(e,a){s(a)},onChangeRowsPerPage:function(e){E(+e.target.value),s(0)}})),r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",marginTop:"20px"}},r.a.createElement(i.b,{to:{pathname:"/altaUsuario",state:{tipo:"Alta"}},style:{textDecoration:"none"}},r.a.createElement(D.a,{className:"buttonAlta"},"Alta Usuario"))))}t(215);function Pe(e){var a=Object(u.g)(),t=Object(n.useState)({name:"",user:"",password:"",rol:"",id:""}),l=Object(c.a)(t,2),s=l[0],p=l[1],d=function(){switch(a.location.state.tipo){case"Alta":if(g()){var e={username:s.user,"contrase\xf1a":s.password,nombre:s.name,rol:["","SUPERVISOR","OPERADOR","ADMINISTRADOR"][s.rol]},t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.post("https://obs-pyme-validacion-back.herokuapp.com/api/usuario",e,t).then((function(e){alert("Usuario agregado!"),a.push("/usuarios")})).catch((function(e){return console.log(e)}))}break;case"Modificar":if(g()){var n={username:s.user,"contrase\xf1a":s.password},r={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/usuario/".concat(s.id),n,r).then((function(e){console.log(e),alert("Contrase\xf1a actualizada!"),a.push("/usuarios")})).catch((function(e){return console.log(e)}))}}},g=function(){return""!==s.name&&""!==s.user&&""!==s.password&&""!==s.rol||(alert("Verifique los datos ingresados..."),!1)};return Object(n.useEffect)((function(){if("Modificar"===a.location.state.tipo){var e=Object(m.a)(localStorage.getItem("token")),t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.get("https://obs-pyme-validacion-back.herokuapp.com/api/usuario/".concat(e.userId),t).then((function(e){var a=e.data,t=["","SUPERVISOR","OPERADOR","SUPERADMIN"].indexOf(a.rol);p(Object(o.a)(Object(o.a)({},s),{},{name:a.nombre,user:a.username,password:a.contrase\u00f1a,rol:t,id:a._id}))})).catch((function(e){return console.log(e)}))}}),[]),r.a.createElement("div",{className:"altaUsuario"},r.a.createElement("form",{className:"loginForm",onSubmit:d},r.a.createElement("p",null,r.a.createElement("strong",null,a.location.state.tipo," Usuario")),r.a.createElement("label",{htmlFor:"email"},"Nombre de Empleado"),r.a.createElement("input",{name:"nombre",type:"text",placeholder:"Nombre",value:s.name,onChange:function(e){p(Object(o.a)(Object(o.a)({},s),{},{name:e.target.value}))},required:!0,disabled:"Modificar"===a.location.state.tipo}),r.a.createElement("label",{style:{marginTop:"20px"},htmlFor:"email"},"Usuario"),r.a.createElement("input",{name:"usuario",type:"text",placeholder:"Usuario",value:s.user,onChange:function(e){p(Object(o.a)(Object(o.a)({},s),{},{user:e.target.value}))},required:!0}),r.a.createElement("label",{style:{marginTop:"20px"},htmlFor:"email"},"Password"),r.a.createElement("input",{name:"usuario",type:"password",placeholder:"Password",value:s.password,onChange:function(e){p(Object(o.a)(Object(o.a)({},s),{},{password:e.target.value}))},required:!0}),r.a.createElement("label",{style:{marginTop:"20px"},htmlFor:"email"},"Rol"),r.a.createElement("select",{style:{width:"100%",marginBottom:"10px"},value:s.rol,onChange:function(e){p(Object(o.a)(Object(o.a)({},s),{},{rol:e.target.value}))},disabled:"Modificar"===a.location.state.tipo},r.a.createElement("option",null,"-"),r.a.createElement("option",{value:1},"Supervisor"),r.a.createElement("option",{value:2},"Operador"),r.a.createElement("option",{value:3},"Superadmin")),r.a.createElement(D.a,{onClick:d,className:"iniciarSesionBtn"},"Confirmar"),r.a.createElement(i.b,{to:"/usuarios",onClick:function(){a.push("/usuarios")},style:{textDecoration:"none"}},r.a.createElement(D.a,{className:"cancelarBtn"},"Cancelar"))))}var De=t(166),we=t(132);t(217);var Ve=function(){var e=Object(n.useState)({username:"",password:""}),a=Object(c.a)(e,2),l=a[0],s=a[1],p=function(){!function(e,a){h.apply(this,arguments)}(l.username,l.password)},E=Object(u.g)();function h(){return(h=Object(g.a)(d.a.mark((function e(a,t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:a,"contrase\xf1a":t},r={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},e.next=4,M.a.post("https://obs-pyme-validacion-back.herokuapp.com/api/login",n,r).then((function(e){localStorage.removeItem("username"),localStorage.removeItem("token"),localStorage.setItem("username",l.username);var a=e.data.token;localStorage.setItem("token",a),"ADMINISTRADOR"===Object(m.a)(a).role?E.push("/usuarios"):E.push("/home")})).catch((function(e){alert("Usuario o contrase\xf1a inv\xe1lido... Por favor, Reintente con otra combinaci\xf3n"),console.log(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(De.a,{validationSchema:we.a().shape({email:we.b().email("Ingrese un email valido.").required("Obligatorio")})},(function(e){var a=e.touched,n=e.errors,c=e.isSubmitting,u=e.handleBlur,m=e.handleSubmit;return r.a.createElement("div",{className:"pantallaLogin"},r.a.createElement("form",{className:"loginForm",onSubmit:m},r.a.createElement("img",{src:t(218),alt:"logo",className:"logo"}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{name:"user",type:"text",placeholder:"Ingrese su usuario",value:l.username,onChange:function(e){return s(Object(o.a)(Object(o.a)({},l),{},{username:e.target.value}))},onBlur:u,className:n.email&&a.email&&"error"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email),r.a.createElement("label",{style:{marginTop:"20px"},htmlFor:"email"},"Password"),r.a.createElement("input",{name:"password",type:"password",placeholder:"Ingrese su clave",value:l.password,onChange:function(e){return s(Object(o.a)(Object(o.a)({},l),{},{password:e.target.value}))},onBlur:u,className:n.password&&a.password&&"error"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password),r.a.createElement(i.b,{className:"iniciarSesionBtn",onClick:p,style:{marginTop:"20px"},type:"submit",disabled:c},"Iniciar Sesion"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("strong",null,"usuario: "),"sup ",r.a.createElement("strong",null,"password: "),"123")))})))};var Be=function(){var e=Object(n.useState)({name:"",user:"",password:"",rol:"",id:""}),a=Object(c.a)(e,2),t=a[0],l=a[1],s=Object(u.g)();Object(n.useEffect)((function(){var e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.get("https://obs-pyme-validacion-back.herokuapp.com/api/usuario/",e).then((function(e){var a=e.data,n=["","SUPERVISOR","OPERADOR","SUPERADMIN"].indexOf(a.rol);l(Object(o.a)(Object(o.a)({},t),{},{name:a.nombre,user:a.username,password:a.contrase\u00f1a,rol:n,id:a._id}))})).catch((function(e){return console.log(e)}))}),[]);var p=function(){return""!==t.name&&""!==t.user&&""!==t.password&&""!==t.rol||(alert("Verifique los datos ingresados..."),!1)};return r.a.createElement("div",{className:"altaUsuario"},r.a.createElement("form",{className:"loginForm"},r.a.createElement("p",null,r.a.createElement("strong",null," Editar Mi Perfil")),r.a.createElement("label",{htmlFor:"email"},"Nombre de Empleado"),r.a.createElement("input",{name:"nombre",type:"text",placeholder:"Nombre",value:t.name,onChange:function(e){l(Object(o.a)(Object(o.a)({},t),{},{name:e.target.value}))},required:!0,disabled:!0}),r.a.createElement("label",{style:{marginTop:"20px"},htmlFor:"email"},"Usuario"),r.a.createElement("input",{name:"usuario",type:"text",placeholder:"Usuario",value:t.user,onChange:function(e){l(Object(o.a)(Object(o.a)({},t),{},{user:e.target.value}))},required:!0,disabled:!0}),r.a.createElement("label",{style:{marginTop:"20px"},htmlFor:"email"},"Password"),r.a.createElement("input",{name:"usuario",type:"password",placeholder:"Password",value:t.password,onChange:function(e){l(Object(o.a)(Object(o.a)({},t),{},{password:e.target.value}))},required:!0}),r.a.createElement("label",{style:{marginTop:"20px"},htmlFor:"email"},"Rol"),r.a.createElement("select",{style:{width:"100%",marginBottom:"10px"},value:t.rol,onChange:function(e){l(Object(o.a)(Object(o.a)({},t),{},{rol:e.target.value}))},disabled:!0},r.a.createElement("option",null,"-"),r.a.createElement("option",{value:1},"Supervisor"),r.a.createElement("option",{value:2},"Operador"),r.a.createElement("option",{value:3},"Superadmin")),r.a.createElement(D.a,{onClick:function(){if(p()){var e={username:t.user,"contrase\xf1a":t.password},a={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};M.a.patch("https://obs-pyme-validacion-back.herokuapp.com/api/usuario/".concat(t.id),e,a).then((function(e){"ADMINISTRADOR"===Object(m.a)(localStorage.getItem("token")).role?s.push("/usuarios"):s.push("/home")})).catch((function(e){return console.log(e)}))}},className:"iniciarSesionBtn"},"Confirmar"),r.a.createElement(i.b,{onClick:function(){s.push("/home")},style:{textDecoration:"none"}},r.a.createElement(D.a,{className:"cancelarBtn"},"Cancelar"))))};t(219);var Le=function(){var e=Object(n.useState)({isSupervisor:!0,effect:""}),a=Object(c.a)(e,2),t=a[0],l=a[1],s=function(){return Object(m.b)(localStorage.getItem("token"))};return Object(n.useEffect)((function(){s();var e=Object(m.a)(localStorage.getItem("token"));l(Object(o.a)(Object(o.a)({},t),{},{userInfo:e}))}),[]),r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/home",render:function(){return s()?r.a.createElement(r.a.Fragment,null,localStorage.removeItem("token"),r.a.createElement(u.a,{to:"/login"})):r.a.createElement("div",{className:"app__home"},r.a.createElement(ye,{user:t.userInfo}),r.a.createElement(pe,null))}}),r.a.createElement(u.b,{path:"/usuarios",render:function(){return s()?r.a.createElement(r.a.Fragment,null,localStorage.removeItem("token"),r.a.createElement(u.a,{to:"/login"})):r.a.createElement("div",{className:"app__home"},r.a.createElement(ye,{user:t.userInfo}),r.a.createElement(xe,null))}}),r.a.createElement(u.b,{path:"/perfil",render:function(){return s()?r.a.createElement(r.a.Fragment,null,localStorage.removeItem("token"),r.a.createElement(u.a,{to:"/login"})):r.a.createElement("div",{className:"app__home"},r.a.createElement(ye,{user:t.userInfo}),r.a.createElement(Be,null))}}),r.a.createElement(u.b,{path:"/altaUsuario",render:function(){return s()?r.a.createElement(r.a.Fragment,null,localStorage.removeItem("token"),r.a.createElement(u.a,{to:"/login"})):r.a.createElement("div",{className:"app__home"},r.a.createElement(ye,{user:t.userInfo}),r.a.createElement(Pe,null))}}),r.a.createElement(u.b,{path:"/detalle",render:function(){return s()?r.a.createElement(r.a.Fragment,null,localStorage.removeItem("token"),r.a.createElement(u.a,{to:"/login"})):r.a.createElement("div",{className:"app__home"},r.a.createElement(ye,{user:t.userInfo}),r.a.createElement("div",{className:"app__navPregunta"},r.a.createElement(K,{user:t.userInfo})))}}),r.a.createElement(u.b,{path:"/"},r.a.createElement(Ve,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,a,t){e.exports=t.p+"static/media/hourglass-regular.9d289f8d.svg"},51:function(e,a,t){e.exports=t.p+"static/media/check-solid.594fe4f2.svg"},94:function(e,a,t){}},[[179,1,2]]]);
//# sourceMappingURL=main.8ed826a9.chunk.js.map